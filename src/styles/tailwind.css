/* Tailwind v4 Configuration */
@import "tailwindcss";

/* ═══════════════════════════════════════════════════ */
/* THEME TOKENS */
/* ═══════════════════════════════════════════════════ */

@theme {
  /* Colors - registered for Tailwind utilities */
  --color-bg: var(--color-bg);
  --color-surface: var(--color-surface);
  --color-surface-raised: var(--color-surface-raised);
  --color-surface-alt: var(--color-surface-alt);
  --color-surface-gradient-end: var(--color-surface-gradient-end);
  --color-border: var(--color-border);
  --color-border-subtle: var(--color-border-subtle);
  --color-border-alt: var(--color-border-alt);
  --color-text: var(--color-text);
  --color-text-muted: var(--color-text-muted);
  --color-text-dim: var(--color-text-dim);
  --color-accent: var(--color-accent);
  --color-accent-hover: var(--color-accent-hover);
  --color-accent-subtle: var(--color-accent-subtle);
  --color-pop: var(--color-pop);
  --color-pop-hover: var(--color-pop-hover);
  --color-nav: var(--color-nav-bg);
  --color-shadow: var(--color-shadow);
  --color-btn-text: var(--color-btn-text);

  /* Dark section variants */
  --color-bg-dark: var(--color-bg-dark);
  --color-bg-dark-hero: var(--color-bg-dark-hero);
  --color-bg-dark-process: var(--color-bg-dark-process);
  --color-surface-dark: var(--color-surface-dark);
  --color-border-dark: var(--color-border-dark);
  --color-text-light: var(--color-text-light);
  --color-text-light-muted: var(--color-text-light-muted);
  --color-primary: var(--color-primary);
  --color-primary-light: var(--color-primary-light);
  --color-secondary: var(--color-secondary);
  --color-secondary-light: var(--color-secondary-light);
  --color-secondary-accessible: var(--color-secondary-accessible);
  --color-tertiary: var(--color-tertiary);


  /* Typography */
  --font-sans: 'Manrope', 'Manrope Fallback', system-ui, -apple-system, sans-serif;
  --font-heading: 'Darker Grotesque', 'Darker Grotesque Fallback', system-ui, -apple-system, sans-serif;
  --font-mono: ui-monospace, 'Fira Code', monospace;

  /* Font Sizes - Standard (--text-* → text-* utilities) */
  --text-13: 0.8125rem;
  --text-15: 0.9375rem;
  --text-17: 1.0625rem;
  --text-21: 1.3125rem;
  --text-22: 1.375rem;
  --text-26: 1.625rem;
  --text-36: 2.25rem;
  --text-48: 3rem;
  --text-72: 4.5rem;

  /* Font Sizes - Responsive (clamp) */
  --text-hero: clamp(4rem, 7vw, 8rem);
  --text-hero-tagline: clamp(1.5rem, 2vw, 1.625rem);
  --text-hero-cta: clamp(1.25rem, 1.5vw, 1.25rem);
  --text-section-title: clamp(2rem, 5vw, 4rem);
  --text-problem-title: clamp(2.5rem, 4.5vw, 4rem);
  --text-section-prose: clamp(1.125rem, 1.5vw + 0.5rem, 1.3125rem);
  --text-problem-prose: clamp(1.25rem, 1.5vw + 0.25rem, 1.375rem);
  --text-section-kicker: clamp(1.25rem, 1.5vw + 0.5rem, 1.75rem);
  --text-problem-kicker: clamp(1.5rem, 2vw, 2rem);
  --text-cta-title: clamp(2rem, 4vw, 4.5rem);
  --text-page-hero: clamp(2.25rem, 6vw, 4rem);
  --text-service-title: clamp(1.5rem, 3vw, 2rem);
  --text-case-study-title: clamp(1.75rem, 3vw, 2.25rem);
  --text-service-tagline: clamp(0.9375rem, 1.2vw, 1.0625rem);

  /* Line Heights (--leading-* → leading-* utilities) */
  --leading-tight: 1.05;
  --leading-snug: 1.1;
  --leading-relaxed: 1.6;
  --leading-loose: 1.7;
  --leading-extra-loose: 1.85;

  /* Letter Spacing (--tracking-* → tracking-* utilities) */
  --tracking-tighter: -0.03em;
  --tracking-tight: -0.02em;
  --tracking-snug: -0.01em;
  --tracking-wide: 0.01em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;

  /* Spacing */
  --spacing-4_5: 1.125rem;
  --spacing-13: 3.25rem;
  --spacing-15: 3.75rem;
  --spacing-17: 4.25rem;
  --spacing-18: 4.5rem;
  --spacing-22: 5.5rem;
  --spacing-26: 6.5rem;
  --spacing-30: 7.5rem;
  --spacing-34: 8.5rem;
  --spacing-section: clamp(5rem, 8vw, 8rem);
  --spacing-hero-gap: clamp(1.5rem, 3vh, 4rem);
  --spacing-hero-cta-gap: clamp(2rem, 4vh, 5rem);

  /* Border Radius */
  --radius-lg: 0.625rem;
  --radius-2xl: 1rem;

  /* Box Shadows */
  --shadow-card-hover: 0 8px 32px -8px var(--color-shadow);
  --shadow-glow: 0 0 20px var(--color-accent-glow), 0 0 60px var(--color-accent-glow), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  --shadow-glow-hover: 0 0 30px var(--color-accent-glow-strong), 0 0 80px var(--color-accent-glow), 0 4px 16px var(--color-shadow), inset 0 1px 0 rgba(255, 255, 255, 0.15);
  --shadow-focus: 0 0 0 3px var(--color-accent-subtle);

  /* Transitions */
  --transition-duration-fast: 200ms;
  --transition-duration-medium: 400ms;
  --transition-duration-slow: 700ms;

  /* Easing Functions (--ease-* → ease-* utilities) */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);

  /* Animations */
  --animate-fade-in-up: fade-in-up 0.9s cubic-bezier(0.16, 1, 0.3, 1) both;
  --animate-subtle-float: subtle-float 12s ease-in-out infinite;

  /* Aspect Ratios (--aspect-* → aspect-* utilities) */
  --aspect-hero: 16 / 10;

  /* Breakpoints */
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1200px;
}

/* ═══════════════════════════════════════════════════ */
/* CUSTOM UTILITIES                                    */
/* ═══════════════════════════════════════════════════ */

@utility container {
  max-width: clamp(900px, 70vw, 1200px);
  margin-inline: auto;
  padding-inline: 1.5rem;
}

/* ═══════════════════════════════════════════════════ */
/* KEYFRAME ANIMATIONS                                 */
/* ═══════════════════════════════════════════════════ */

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes subtle-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-6px);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Scroll animations disabled - sections appear immediately */
.animate-on-scroll {
  opacity: 1;
  transform: none;
}


/* ═══════════════════════════════════════════════════ */
/* FONT FALLBACK METRICS (reduce CLS from font swap)   */
/* ═══════════════════════════════════════════════════ */

@font-face {
  font-family: 'Darker Grotesque Fallback';
  src: local('Arial');
  size-adjust: 108%;
  ascent-override: 95%;
  descent-override: 22%;
  line-gap-override: 0%;
}

@font-face {
  font-family: 'Manrope Fallback';
  src: local('Arial');
  size-adjust: 103%;
  ascent-override: 92%;
  descent-override: 22%;
  line-gap-override: 0%;
}

/* ═══════════════════════════════════════════════════ */
/* BASE STYLES (in @layer base so utilities can win)   */
/* ═══════════════════════════════════════════════════ */

@layer base {
  html {
    font-family: var(--font-sans);
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    min-height: 100vh;
    font-size: 1.125rem;
  }

  body.nav-open {
    overflow: hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
  }

  a {
    color: var(--color-accent-hover);
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }
}

/* ═══════════════════════════════════════════════════ */
/* COMPONENT CLASSES (complex reusable patterns only)  */
/* ═══════════════════════════════════════════════════ */

@layer components {
  /* CTA button with glow — used in 4+ places, complex shadow/hover states */
  .btn-cta {
    display: inline-block;
    padding: 1rem 2.5rem;
    background: var(--color-accent);
    color: var(--color-btn-text);
    border-radius: 0.625rem;
    font-weight: 600;
    font-size: 1.125rem;
    letter-spacing: -0.01em;
    transition: all 0.3s var(--ease-out-expo);
    box-shadow: var(--shadow-glow);
    border: 1px solid rgba(255, 255, 255, 0.08);
    text-decoration: none;
  }

  .btn-cta:hover {
    background: var(--color-accent-hover);
    box-shadow: var(--shadow-glow-hover);
    transform: translateY(-2px);
    text-decoration: none;
  }

  .btn-cta:active {
    transform: translateY(0);
    transition-duration: 0.1s;
  }

  /* Hero aurora background effect — complex animation, decorative */
  .hero-aurora {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: 0;
  }

  .hero-aurora-inner {
    --white: #ffffff;
    --black: #000000;
    --transparent: transparent;
    --aurora-1: #3b82f6;
    --aurora-2: #a5b4fc;
    --aurora-3: #93c5fd;
    --aurora-4: #ddd6fe;
    --aurora-5: #60a5fa;

    --base-gradient: repeating-linear-gradient(100deg, var(--black) 0%, var(--black) 7%, var(--transparent) 10%, var(--transparent) 12%, var(--black) 16%);
    --aurora: repeating-linear-gradient(100deg, var(--aurora-1) 10%, var(--aurora-2) 15%, var(--aurora-3) 20%, var(--aurora-4) 25%, var(--aurora-5) 30%);

    position: absolute;
    inset: -10px;
    background-image: var(--base-gradient), var(--aurora);
    background-size: 300%, 200%;
    background-position: 50% 50%, 50% 50%;
    filter: blur(10px);
    opacity: 0.5;
    pointer-events: none;
    mask-image: radial-gradient(ellipse at 100% 0%, black 10%, var(--transparent) 70%);
    -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 10%, var(--transparent) 70%);
  }

  .hero-aurora-inner::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image: var(--base-gradient), var(--aurora);
    background-size: 200%, 100%;
    mix-blend-mode: difference;
    animation: auroraFlow 60s linear infinite;
  }

  @keyframes auroraFlow {
    from {
      background-position: 50% 50%, 50% 50%;
    }
    to {
      background-position: 350% 50%, 350% 50%;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-aurora-inner::after {
      animation: none;
    }
  }

  /* Process section — interactive panel with state-based styling */
  .section-process {
    background-color: var(--color-bg-dark-process);
    color: var(--color-text-light);
    --color-bg: var(--color-bg-dark-process);
    --color-surface: var(--color-bg-dark-process);
    --color-border: var(--color-border-dark);
    --color-border-subtle: var(--color-border-subtle-dark);
    --color-text: var(--color-text-light);
    --color-text-muted: var(--color-text-light-muted);
    --color-text-dim: var(--color-text-light-dim);
    --color-accent-hover: var(--color-primary-light);
    --color-pop: var(--color-secondary);
    overflow: hidden;
  }

  .process-blob-blur {
    position: absolute;
    top: -20%;
    right: 8%;
    width: 45%;
    aspect-ratio: 1;
    opacity: 0.8;
    filter: blur(82px);
    -webkit-filter: blur(82px);
    pointer-events: none;
    z-index: 0;
    transition: opacity 600ms var(--ease-out-expo);
  }

  .section-process[data-active="0"] .process-blob-blur,
  .section-process[data-active="3"] .process-blob-blur {
    opacity: 0.3;
  }

  .process-blob {
    width: 100%;
    height: 100%;
    transition: clip-path 600ms var(--ease-out-expo), background 600ms var(--ease-out-expo);
  }

  .section-process[data-active="0"] .process-blob {
    clip-path: polygon(31% 43%, 3% 24%, 29% 69%, 97% 83%, 51% 27%, 31% 9%, 66% 99%, 81% 64%, 85% 31%, 85% 41%, 49% 76%, 12% 26%, 42% 43%, 79% 48%);
    background: var(--color-secondary);
  }

  .section-process[data-active="1"] .process-blob {
    clip-path: polygon(18% 52%, 8% 18%, 42% 71%, 89% 91%, 63% 35%, 25% 5%, 78% 88%, 91% 52%, 72% 19%, 95% 28%, 38% 84%, 5% 39%, 54% 51%, 68% 62%);
    background: var(--color-primary);
  }

  .section-process[data-active="2"] .process-blob {
    clip-path: polygon(35% 48%, 12% 28%, 45% 82%, 91% 71%, 55% 15%, 25% 35%, 78% 91%, 82% 52%, 88% 18%, 68% 65%, 32% 88%, 18% 22%, 71% 42%, 85% 75%);
    background: var(--color-tertiary);
  }

  .section-process[data-active="3"] .process-blob {
    clip-path: polygon(28% 58%, 11% 31%, 38% 85%, 92% 74%, 57% 19%, 33% 8%, 73% 92%, 88% 48%, 68% 26%, 81% 63%, 44% 95%, 18% 22%, 59% 44%, 75% 71%);
    background: var(--color-quaternary);
  }

  .process-panel {
    display: grid;
    grid-template-columns: 1fr 1.4fr;
    gap: 4rem;
    align-items: start;
    min-height: 320px;
  }

  .process-nav {
    display: flex;
    flex-direction: column;
  }

  .process-nav-item {
    all: unset;
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 0;
    cursor: pointer;
    position: relative;
    border-bottom: 1px solid var(--color-border);
    transition: padding-left 400ms var(--ease-out-expo);
  }

  .process-nav-item:first-child {
    border-top: 1px solid var(--color-border);
  }

  .process-nav-number {
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    color: var(--color-text-dim);
    letter-spacing: 0.05em;
    min-width: 2rem;
    transition: color 400ms var(--ease-out-expo);
  }

  .process-nav-line {
    width: 2rem;
    height: 2px;
    background: var(--color-border);
    border-radius: 1px;
    transition: width 400ms var(--ease-out-expo), background 400ms var(--ease-out-expo);
  }

  .process-nav-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-text-muted);
    transition: color 400ms var(--ease-out-expo);
    letter-spacing: -0.01em;
  }

  .process-nav-item:hover .process-nav-title { color: var(--color-text); }
  .process-nav-item:hover .process-nav-line { background: var(--color-text-dim); }

  .process-panel[data-active="0"] .process-nav-item[data-index="0"],
  .process-panel[data-active="1"] .process-nav-item[data-index="1"],
  .process-panel[data-active="2"] .process-nav-item[data-index="2"],
  .process-panel[data-active="3"] .process-nav-item[data-index="3"] {
    padding-left: 0.5rem;
  }

  .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-number {
    color: var(--color-secondary);
  }
  .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-line {
    width: 3rem;
    background: var(--color-secondary);
  }
  .process-panel[data-active="0"] .process-detail-number {
    color: var(--color-secondary);
  }

  .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-number {
    color: var(--color-primary);
  }
  .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-line {
    width: 3rem;
    background: var(--color-primary);
  }
  .process-panel[data-active="1"] .process-detail-number {
    color: var(--color-primary);
  }

  .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-number {
    color: var(--color-tertiary);
  }
  .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-line {
    width: 3rem;
    background: var(--color-tertiary);
  }
  .process-panel[data-active="2"] .process-detail-number {
    color: var(--color-tertiary);
  }

  .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-number {
    color: var(--color-quaternary);
  }
  .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-line {
    width: 3rem;
    background: var(--color-quaternary);
  }
  .process-panel[data-active="3"] .process-detail-number {
    color: var(--color-quaternary);
  }

  .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-title,
  .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-title,
  .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-title,
  .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-title {
    color: var(--color-text);
    font-weight: 700;
  }

  .process-details {
    position: relative;
    min-height: 380px;
  }

  .process-detail {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(8px);
    transition: opacity 400ms var(--ease-out-expo), visibility 400ms, transform 400ms var(--ease-out-expo);
  }

  .process-panel[data-active="0"] .process-detail[data-index="0"],
  .process-panel[data-active="1"] .process-detail[data-index="1"],
  .process-panel[data-active="2"] .process-detail[data-index="2"],
  .process-panel[data-active="3"] .process-detail[data-index="3"] {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .process-detail-number {
    display: block;
    font-family: var(--font-mono);
    font-size: 3rem;
    font-weight: 700;
    opacity: 0.6;
    line-height: 1;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;
    transition: color 400ms var(--ease-out-expo);
  }

  .process-detail-title {
    font-size: 2.25rem;
    font-weight: 700;
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
    color: var(--color-text);
  }

  .process-detail-desc {
    font-size: 1.25rem;
    color: var(--color-text-muted);
    line-height: 1.8;
    max-width: 520px;
  }

  @media (max-width: 768px) {
    .process-blob-blur {
      width: 80%;
      right: -20%;
      top: 10%;
      opacity: 0.4;
      filter: blur(60px);
      transition: top 600ms var(--ease-out-expo), opacity 600ms var(--ease-out-expo);
    }

    .section-process[data-active="0"] .process-blob-blur {
      top: 5%;
    }

    .section-process[data-active="1"] .process-blob-blur {
      top: 18%;
    }

    .section-process[data-active="2"] .process-blob-blur {
      top: 31%;
    }

    .section-process[data-active="3"] .process-blob-blur {
      top: 44%;
    }

    .process-panel {
      display: flex;
      flex-direction: column;
      gap: 0;
      min-height: auto;
    }

    .process-nav {
      display: contents;
    }

    .process-nav-item {
      order: calc(var(--item-index) * 2);
      border-top: 1px solid var(--color-border);
      border-bottom: none;
      padding: 1.5rem 0;
      width: 100%;
    }

    .process-nav-item[data-index="0"] { --item-index: 0; }
    .process-nav-item[data-index="1"] { --item-index: 1; }
    .process-nav-item[data-index="2"] { --item-index: 2; }
    .process-nav-item[data-index="3"] { --item-index: 3; }

    .process-nav-number {
      transition: color 300ms var(--ease-out-expo), font-size 300ms var(--ease-out-expo);
    }

    .process-nav-title {
      transition: font-size 300ms var(--ease-out-expo), font-weight 300ms var(--ease-out-expo);
    }

    .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-number,
    .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-number,
    .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-number,
    .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-number {
      font-size: 1.5rem;
    }

    .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-title,
    .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-title,
    .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-title,
    .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-title {
      font-size: 1.75rem;
      font-weight: 700;
    }

    .process-panel[data-active="0"] .process-nav-item[data-index="0"] .process-nav-number {
      color: var(--color-secondary);
    }

    .process-panel[data-active="1"] .process-nav-item[data-index="1"] .process-nav-number {
      color: var(--color-primary);
    }

    .process-panel[data-active="2"] .process-nav-item[data-index="2"] .process-nav-number {
      color: var(--color-tertiary);
    }

    .process-panel[data-active="3"] .process-nav-item[data-index="3"] .process-nav-number {
      color: var(--color-quaternary);
    }

    .process-nav-line {
      display: none;
    }

    .process-details {
      display: contents;
    }

    .process-detail {
      position: relative;
      opacity: 1;
      visibility: visible;
      transform: none;
      order: calc(var(--detail-index) * 2 + 1);
      max-height: 0;
      overflow: hidden;
      transition: max-height 400ms var(--ease-out-expo), padding 400ms var(--ease-out-expo);
      padding: 0;
      border: none;
    }

    .process-detail[data-index="0"] { --detail-index: 0; }
    .process-detail[data-index="1"] { --detail-index: 1; }
    .process-detail[data-index="2"] { --detail-index: 2; }
    .process-detail[data-index="3"] { --detail-index: 3; }

    .process-panel[data-active="0"] .process-detail[data-index="0"],
    .process-panel[data-active="1"] .process-detail[data-index="1"],
    .process-panel[data-active="2"] .process-detail[data-index="2"],
    .process-panel[data-active="3"] .process-detail[data-index="3"] {
      max-height: 500px;
      padding: 0 0 2rem;
    }

    .process-detail-number {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .process-detail-title {
      transition: opacity 300ms var(--ease-out-expo);
    }

    .process-detail-number,
    .process-detail-title {
      display: none;
    }

    .process-nav-item[data-index="3"] {
      border-bottom: 1px solid var(--color-border);
    }

    .process-panel[data-active="3"] .process-nav-item[data-index="3"] {
      border-bottom: none;
    }

    .process-panel[data-active="3"] .process-detail[data-index="3"] {
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 2rem;
    }
  }
}
